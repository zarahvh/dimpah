
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analysing Historical Cultures 2 &#8212; DIMPAH</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Visuals and Arts 1" href="../VisualsArts/Visuals_and_Arts_1.html" />
    <link rel="prev" title="Analysing Historical Cultures 1" href="Text_1.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">DIMPAH</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Intro
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../Introduction.html">
   Introduction to Python
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../Introduction/Introduction_1.1.html">
     Introduction to Python 1.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Introduction/Introduction_1.2.html">
     Introduction to Python 1.2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Introduction/Introduction_2.1.html">
     Introduction to Python 2.1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../Introduction/Introduction_2.2.html">
     Introduction to Python 2.2
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="../../social_analytics.html">
   Social Analytics
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../SocialMedia/Social_Sensing_1.html">
     Social Sensing 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SocialMedia/Social_Sensing_2.html">
     Social Sensing 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Text_1.html">
     Analysing Historical Cultures 1
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Analysing Historical Cultures 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../VisualsArts/Visuals_and_Arts_1.html">
     Visuals and Arts 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../VisualsArts/Visuals_and_Arts_2.html">
     Visuals and Arts 2
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../AI_for_society.html">
   AI for society
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass1/Machine_Bias.html">
     Machine Bias
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass2/Civility_in_Communication.html">
     Civility in Communication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass3/Data_Exploration.html">
     Exploratory Data Analysis with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass3/US_Congress_Sponsors.html">
     Collaboration Networks in the US Congress
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass3/Analysing_Communities_1.html">
     Detecting Political Communities of Practice
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../AI_for_society/ass3/Analysing_Communities_2.html">
     Social Data from the Web
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../../PredictingModelling.html">
   AI for society
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../../PredictingModelling/LinearPrediction.html">
     Linear Regression Prediction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PredictingModelling/PredictingModelling.html">
     Predicting Modelling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../PredictingModelling/Titanic.html">
     Predicting the survival of Titanic passengers
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/SocialAnalytics/Text/Text_2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/zarahvh/dimpah"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/zarahvh/dimpah/issues/new?title=Issue%20on%20page%20%2FSocialAnalytics/Text/Text_2.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/zarahvh/dimpah/master?urlpath=tree/SocialAnalytics/Text/Text_2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="analysing-historical-cultures-2">
<h1>Analysing Historical Cultures 2<a class="headerlink" href="#analysing-historical-cultures-2" title="Permalink to this headline">¶</a></h1>
<p>Have you heard about the Google Ngram Viewer, which plots frequencies of words using a yearly count in sources printed between 1500 and 2008 in Google’s book corpora? It has created quite an excitement in the digital methods world. Check out <a class="reference external" href="http://firstmonday.org/ojs/index.php/fm/article/view/5567/5535">http://firstmonday.org/ojs/index.php/fm/article/view/5567/5535</a>. There are many examples and some strong believers. You can try Google’s Ngram Viewer under <a class="reference external" href="https://books.google.com/ngrams">https://books.google.com/ngrams</a>.</p>
<p>We can use it to compare, for example the difference in frequencies over the years between the words hacker and programmer between 1950 and 2000. Let’s see, we start with hacker.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">hacker</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=hacker&amp;year_start=1950&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">hacker</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s first create a dataframe that collects the frequencies for each year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;hacker&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">years</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1950</span><span class="p">,</span><span class="mi">2001</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">years</span>
</pre></div>
</div>
</div>
</div>
<p>And plot it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span><span class="s1">&#39;hacker&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;year&#39;&gt;
</pre></div>
</div>
<img alt="../../_images/Text_2_7_1.png" src="../../_images/Text_2_7_1.png" />
</div>
</div>
<p>Not let’s add the frequencies of programmer to this dataframe too.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">progr</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=programmer&amp;year_start=1950&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">progr</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;programmer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>And plot them together</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;year&#39;&gt;
</pre></div>
</div>
<img alt="../../_images/Text_2_11_1.png" src="../../_images/Text_2_11_1.png" />
</div>
</div>
<p>Let us compare the popularity of monarchies and democracies too from 1500 to 2000</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demo</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=democracy&amp;year_start=1500&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;democracy&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mona</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=monarchy&amp;year_start=1500&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">mona</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df2</span><span class="p">[</span><span class="s1">&#39;monarchy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">years</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1500</span><span class="p">,</span><span class="mi">2001</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df2</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">years</span>
<span class="n">df2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>democracy</th>
      <th>monarchy</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.339067e-07</td>
      <td>0.000000</td>
      <td>1500</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.871254e-07</td>
      <td>0.000000</td>
      <td>1501</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.559378e-07</td>
      <td>0.000000</td>
      <td>1502</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1.336610e-07</td>
      <td>0.000000</td>
      <td>1503</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.000000e+00</td>
      <td>0.000000</td>
      <td>1504</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>496</th>
      <td>2.868582e-05</td>
      <td>0.000004</td>
      <td>1996</td>
    </tr>
    <tr>
      <th>497</th>
      <td>2.912133e-05</td>
      <td>0.000004</td>
      <td>1997</td>
    </tr>
    <tr>
      <th>498</th>
      <td>2.933466e-05</td>
      <td>0.000004</td>
      <td>1998</td>
    </tr>
    <tr>
      <th>499</th>
      <td>2.950909e-05</td>
      <td>0.000004</td>
      <td>1999</td>
    </tr>
    <tr>
      <th>500</th>
      <td>2.967938e-05</td>
      <td>0.000004</td>
      <td>2000</td>
    </tr>
  </tbody>
</table>
<p>501 rows × 3 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;year&#39;&gt;
</pre></div>
</div>
<img alt="../../_images/Text_2_16_1.png" src="../../_images/Text_2_16_1.png" />
</div>
</div>
<p>There is a lot going on here but democracy seems to be winning. Let’s move on to another example. If you have done a little bit of research on the Holocaust, you might know that there are on-going debates on whether to call it Shoah or Holocaust (<a class="reference external" href="https://en.wikipedia.org/wiki/Names_of_the_Holocaust">https://en.wikipedia.org/wiki/Names_of_the_Holocaust</a>). Rewrite the last expression so with shoah instead of democracy and holocaust instead of monarchy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shoah</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=shoah&amp;year_start=1500&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">shoah</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">df3</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;shoah&#39;</span><span class="p">})</span>

<span class="n">holo</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://books.google.com/ngrams/json?content=holocaust&amp;year_start=1500&amp;year_end=2000&amp;corpus=26&amp;smoothing=3&#39;</span><span class="p">)</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">holo</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df3</span><span class="p">[</span><span class="s1">&#39;holocaust&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;timeseries&#39;</span><span class="p">])</span>

<span class="n">years</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1500</span><span class="p">,</span><span class="mi">2001</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df3</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">years</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;year&#39;&gt;
</pre></div>
</div>
<img alt="../../_images/Text_2_19_1.png" src="../../_images/Text_2_19_1.png" />
</div>
</div>
<p>So, despite the efforts to popularise the Hebrew word Shoah, Holocaust is still far more commonly used. Frequency has proven to be a good indicator of the development and importance of ideas. But it is not the only text analysis tool that we can use to derive ideas from documents.</p>
<p>Another commonly used text mining tool is information extraction (<a class="reference external" href="https://en.wikipedia.org/wiki/Information_extraction">https://en.wikipedia.org/wiki/Information_extraction</a>). With information extraction we can retrieve ideas and concepts directly from texts.</p>
<p>We would like to concentrate on the online information extraction service <a class="reference external" href="https://spacy.io">https://spacy.io</a>. It can be easily implemented in oython as can be seen on the homepage by downloading and importing spacy. We are going to use it on an english text, namely one of the speeches that we have seen in the previous assignment, for this we will need an englisht tokenizer, in your terminal run: python -m spacy download en_core_web_sm</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;en_core_web_sm&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/20070123.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With the function below you should see the kind of entities that are contained in your submission document. Try it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>George W. Bush PERSON
January 23, 2007
 DATE
Tonight TIME
first ORDINAL
the State of the Union GPE
his day DATE
Thomas D&#39;Alesandro PERSON
Baltimore GPE
Maryland GPE
Presidents Roosevelt PERSON
Truman PERSON
Nancy PERSON
tonight TIME
the House of Representatives ORG
Two CARDINAL
House ORG
Senate ORG
tonight TIME
Tim Johnson PERSON
Charlie Norwood PERSON
Cheney PERSON
Congress ORG
a defining hour TIME
the year 2007 DATE
Chamber ORG
House ORG
Senate ORG
Democratic NORP
Congress ORG
Nation ORG
America GPE
first ORDINAL
American NORP
Americans NORP
tonight TIME
the 41st month DATE
7.2 million CARDINAL
Next week DATE
Tonight TIME
three CARDINAL
Congress ORG
First ORDINAL
Washington GPE
half CARDINAL
2009 DATE
3 years ahead DATE
the coming weeks DATE
the next 5 years DATE
the Federal Government ORG
the last hour TIME
C-SPAN ORG
2005 DATE
over 13,000 CARDINAL
nearly $18 billion MONEY
over 90 percent PERCENT
House ORG
Senate ORG
Congress ORG
half CARDINAL
Social Security ORG
Medicare ORG
Medicaid ORG
one day DATE
three CARDINAL
Chamber ORG
Medicare ORG
Medicaid ORG
Social Security ORG
America GPE
Five years ago DATE
America GPE
Congress ORG
Americans NORP
Americans NORP
tonight TIME
two CARDINAL
Americans NORP
First ORDINAL
15,000 MONEY
7,500 MONEY
more than 100 million CARDINAL
Americans NORP
4,500 MONEY
four CARDINAL
60,000 MONEY
millions CARDINAL
Americans NORP
the Tax Code LAW
Americans NORP
second ORDINAL
States GPE
Health and Human Services ORG
Congress ORG
Affordable Choices WORK_OF_ART
Congress ORG
America GPE
the Border Patrol LOC
Capitol FAC
America GPE
America GPE
America GPE
America GPE
Washington GPE
Tonight TIME
Congress ORG
the United States GPE
20 percent PERCENT
the next 10 years DATE
three-quarters CARDINAL
the Middle East LOC
35 billion gallons QUANTITY
2017 DATE
nearly five CARDINAL
up to 8\1/2\ billion MONEY
2017 DATE
America GPE
Congress ORG
the Strategic Petroleum Reserve ORG
America GPE
United States GPE
Senate ORG
Senate ORG
Five years DATE
September DATE
one CARDINAL
America GPE
al Qaeda ORG
Southeast Asian NORP
the United States GPE
al Qaeda ORG
America GPE
just last August DATE
British NORP
America GPE
the Atlantic Ocean LOC
9/11 CARDINAL
America GPE
September 11 DATE
these past 5 years DATE
Al Qaeda ORG
Sunni NORP
Americans NORP
Zarqawi PERSON
Osama bin Laden PERSON
Earth LOC
one CARDINAL
Islamist NORP
Shia NORP
America GPE
the Middle East LOC
Iran GPE
Hezbollah ORG
second ORDINAL
al Qaeda ORG
American NORP
Shia NORP
Sunni NORP
Americans NORP
the Middle East LOC
the sixth year DATE
American NORP
19 CARDINAL
our day DATE
America GPE
the Middle East LOC
the last 2 years DATE
Middle East LOC
2005 DATE
Lebanon GPE
the Cedar Revolution EVENT
Syrian NORP
2005 DATE
Afghanistan GPE
2005 DATE
Iraqi NORP
three CARDINAL
Arab NORP
nearly 12 million CARDINAL
Iraqi NORP
2006 DATE
Lebanon GPE
Pierre Gemayel PERSON
the Cedar Revolution EVENT
Hezbollah ORG
Syria GPE
Iran GPE
Lebanon GPE
Afghanistan GPE
Taliban ORG
al Qaeda ORG
Afghan NORP
NATO ORG
Iraq GPE
al Qaeda ORG
Sunni NORP
one CARDINAL
Shia NORP
the Golden Mosque of Samarra FAC
Muslim NORP
Iraqi Shia NORP
Shia NORP
Iran GPE
this day DATE
Iraq GPE
this day DATE
this hour TIME
Iraq GPE
Iraq GPE
Iraq GPE
Iraq GPE
the Iraqi Government ORG
Iraqis NORP
more than 20,000 CARDINAL
Iraq GPE
Baghdad GPE
Iraqi NORP
Iraqi Army ORG
Iraqis NORP
Anbar GPE
al Qaeda ORG
an additional 4,000 CARDINAL
United States GPE
al Qaeda ORG
Afghanistan GPE
Iraq GPE
Iraq GPE
Iraq GPE
Baghdad GPE
Iraqi NORP
Baghdad GPE
Iraq GPE
Iraq GPE
Iraq GPE
Iraq GPE
Iraqis NORP
Iraqi NORP
Baghdad GPE
Chamber ORG
America GPE
Iraq GPE
American NORP
Baghdad GPE
the Iraqi Government ORG
Shia NORP
Iran GPE
Sunni NORP
al Qaeda ORG
Iraq GPE
America GPE
September 11 DATE
America GPE
the Middle East LOC
Iraq GPE
American NORP
tonight TIME
Iraq GPE
today DATE
Congress ORG
America GPE
One CARDINAL
first ORDINAL
the American Armed Forces ORG
Tonight TIME
Congress ORG
Army ORG
Marine Corps ORG
92,000 CARDINAL
the next 5 years DATE
second ORDINAL
the Armed Forces ORG
America GPE
America GPE
Americans NORP
Iraq GPE
the United Nations ORG
Jordan GPE
Saudi Arabia GPE
Egypt GPE
Iraq GPE
The United Nations ORG
Iran GPE
Tehran GPE
Quartet PERSON
U.N. ORG
the European Union ORG
Russia GPE
the Holy Land ORG
Palestinian NORP
Israel GPE
Afghanistan GPE
NATO ORG
Taliban ORG
al Qaeda ORG
first ORDINAL
North Atlantic LOC
China GPE
Japan GPE
Russia GPE
South Korea GPE
Korean Peninsula LOC
Cuba GPE
Belarus GPE
Darfur GPE
American NORP
America GPE
Africa LOC
50,000 CARDINAL
more than 800,000 CARDINAL
3 short years DATE
$1.2 billion MONEY
5 years DATE
15 CARDINAL
African NORP
the Millennium Challenge Account ORG
American NORP
America GPE
American NORP
tonight TIME
Dikembe Mutombo PERSON
Africa LOC
Georgetown University ORG
Coach John Thompson PERSON
Dikembe PERSON
Dikembe PERSON
NBA ORG
the United States GPE
Congo GPE
the United States of America GPE
Julie Aigner-Clark PERSON
The Baby Einstein Company ORG
just 5 years DATE
more than $20 million MONEY
November 2001 DATE
Julie PERSON
Baby Einstein PERSON
Walt Disney Company ORG
Baby Einstein PERSON
$200 million MONEY
Julie PERSON
America GPE
John Walsh PERSON
the National Center for Missing ORG
Exploited Children ORG
Julie PERSON
tonight TIME
Julie Aigner-Clark PERSON
Three weeks ago DATE
Wesley Autry PERSON
Harlem LOC
two CARDINAL
seconds TIME
Wesley PERSON
Wesley Autry PERSON
Tommy Rieman PERSON
Independence GPE
Kentucky GPE
the United States Army GPE
December 2003 DATE
Iraq GPE
Humvee NORP
Sergeant Rieman PERSON
second ORDINAL
Sergeant Rieman PERSON
Silver Star ORG
Americans NORP
America GPE
Union GPE
tonight TIME
Brad Borevitz PERSON
</pre></div>
</div>
</div>
</div>
<p>Extracting entities can be a useful in the automatic analysis of texts. We can use the entities to understand content better or even provide effective links between different texts. If we know that two documents are about the same place, for instance, it seems logical that there is a link between them based on the place. Because I have worked a lot with computational archives, where we want to link collections and documents, I have done a lot of work in information extraction – especially with heterogeneous historical material. I have also been involved with analysing testimonies and other oral histories. Here, a typical question is the kind of sentiment a memory expresses. Is it a positive or negative memory? If so to what degree? These are the kinds of questions that automated sentiment analysis can answer, which we cover next.</p>
<p>Sentiment analysis aims to evaluate emotions and other highly subjective expressions in a text. Commonly this is applied to finding out whether tweets, movie reviews, etc. express a positive or negative sentiment. In fact, later in the module, when we discuss prediction models, we will look into an example based on movie reviews. Generally speaking, sentiment analysis is done using a so-called supervised approach, where a human annotates a collection with the sentiments of a document and the computer tries to learn about the decisions on sentiments of that human.</p>
<!-- We will use an unsupervised approach, where the computer learns by itself. We have already seen an example of unsupervised learning when we clustered US Congress voting behaviour. Some people argue that sentiment analysis should never be done as unsupervised learning. Gary King, for instance, consistently warns us that this is one of the worst possible mistakes. Check out his website http://gking.harvard.edu/. He should be interesting for us. -->
<p>We use the dictionary-based sentiment analysis approach developed in <a class="reference external" href="https://www.r-bloggers.com/sentiment-analysis-on-donald-trump-using-r-and-tableau/">https://www.r-bloggers.com/sentiment-analysis-on-donald-trump-using-r-and-tableau/</a>.  It uses a lexicon of positive and negative words and then simply counts the number of times positive and negative words appear in a text. If there are more positive words than negative words, the text will get an overall positive sentiment, otherwise a negative one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nltk</span>
</pre></div>
</div>
</div>
</div>
<p>First we clean the speechtexts</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyreadr</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="n">stopwords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">))</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pyreadr</span><span class="o">.</span><span class="n">read_r</span><span class="p">(</span><span class="s1">&#39;data/sotu_all.rda&#39;</span><span class="p">)</span> 

<span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sotu_all&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">clean_text</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">docs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">speech</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;speechtext&#39;</span><span class="p">]</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">speech</span><span class="p">)</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
        <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()]</span>
        <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="p">]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;speechtext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words</span>
        <span class="n">docs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">docs</span><span class="p">,</span> <span class="n">df</span>

<span class="n">docs</span><span class="p">,</span> <span class="n">df</span> <span class="o">=</span> <span class="n">clean_text</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>And prepare the lexicon of positive and negative words</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neg_words</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/negative-words.txt&quot;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">)</span>
<span class="n">neg_words</span> <span class="o">=</span> <span class="n">neg_words</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">neg_words</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>

<span class="n">pos_words</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/positive-words.txt&quot;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">)</span>
<span class="n">pos_words</span> <span class="o">=</span> <span class="n">pos_words</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pos_words</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;2-faced&#39;, &#39;2-faces&#39;, &#39;abnormal&#39;, &#39;abolish&#39;, &#39;abominable&#39;, &#39;abominably&#39;, &#39;abominate&#39;, &#39;abomination&#39;, &#39;abort&#39;, &#39;aborted&#39;]
[&#39;a+&#39;, &#39;abound&#39;, &#39;abounds&#39;, &#39;abundance&#39;, &#39;abundant&#39;, &#39;accessable&#39;, &#39;accessible&#39;, &#39;acclaim&#39;, &#39;acclaimed&#39;, &#39;acclamation&#39;]
</pre></div>
</div>
</div>
</div>
<p>Now we check for each word in our text whether it is in either the list of positive or that of negative words, this might take a while.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># from nltk.sentiment import SentimentIntensityAnalyzer</span>
<span class="c1"># sia = SentimentIntensityAnalyzer()</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;speechtext&#39;</span><span class="p">]</span>
    <span class="n">negs</span> <span class="o">=</span><span class="mi">0</span>
    <span class="n">pos</span> <span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">neg_words</span><span class="p">:</span>
            <span class="n">negs</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">pos_words</span><span class="p">:</span>
            <span class="n">pos</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;neg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">negs</span>
        
</pre></div>
</div>
</div>
</div>
<p>Let’s now add these numbers to our dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>speechtext</th>
      <th>year</th>
      <th>date</th>
      <th>pos</th>
      <th>neg</th>
    </tr>
    <tr>
      <th>rownames</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>17900108.html</th>
      <td>[senate, house, representatives, embrace, grea...</td>
      <td>1790</td>
      <td>17900108</td>
      <td>86.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>17901208.html</th>
      <td>[senate, house, representatives, meeting, feel...</td>
      <td>1790</td>
      <td>17901208</td>
      <td>72.0</td>
      <td>24.0</td>
    </tr>
    <tr>
      <th>17911025.html</th>
      <td>[senate, house, representatives, vain, may, ex...</td>
      <td>1791</td>
      <td>17911025</td>
      <td>119.0</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>17921106.html</th>
      <td>[senate, house, representatives, abatement, sa...</td>
      <td>1792</td>
      <td>17921106</td>
      <td>83.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>17931203.html</th>
      <td>[senate, house, representatives, since, commen...</td>
      <td>1793</td>
      <td>17931203</td>
      <td>84.0</td>
      <td>58.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>20130212.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2013</td>
      <td>20130212</td>
      <td>301.0</td>
      <td>117.0</td>
    </tr>
    <tr>
      <th>20140128.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2014</td>
      <td>20140128</td>
      <td>294.0</td>
      <td>133.0</td>
    </tr>
    <tr>
      <th>20150120.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2015</td>
      <td>20150120</td>
      <td>293.0</td>
      <td>162.0</td>
    </tr>
    <tr>
      <th>20160112.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2016</td>
      <td>20160112</td>
      <td>250.0</td>
      <td>136.0</td>
    </tr>
    <tr>
      <th>20170228.html</th>
      <td>[thank, much, speaker, vice, president, member...</td>
      <td>2017</td>
      <td>20170228</td>
      <td>243.0</td>
      <td>132.0</td>
    </tr>
  </tbody>
</table>
<p>231 rows × 5 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
<span class="c1">#     df.loc[index, &#39;sent_score&#39;] = row[&#39;pos&#39;] - row[&#39;neg&#39;]</span>
    <span class="n">tot</span><span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;neg&#39;</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;pos_score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tot</span>
<span class="c1">#     df.loc[index, &#39;neg_score&#39;] = -row[&#39;neg&#39;]/tot</span>
</pre></div>
</div>
</div>
</div>
<p>We can now check whether there are more positive or negative words in each text by using the pos_score, which means it is positive if &gt;0.5, meaning that more than 50 percent of the words are positive</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
<span class="c1"># Thus more positive??</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>speechtext</th>
      <th>year</th>
      <th>date</th>
      <th>pos</th>
      <th>neg</th>
      <th>pos_score</th>
    </tr>
    <tr>
      <th>rownames</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>17900108.html</th>
      <td>[senate, house, representatives, embrace, grea...</td>
      <td>1790</td>
      <td>17900108</td>
      <td>86.0</td>
      <td>15.0</td>
      <td>0.851485</td>
    </tr>
    <tr>
      <th>17901208.html</th>
      <td>[senate, house, representatives, meeting, feel...</td>
      <td>1790</td>
      <td>17901208</td>
      <td>72.0</td>
      <td>24.0</td>
      <td>0.750000</td>
    </tr>
    <tr>
      <th>17911025.html</th>
      <td>[senate, house, representatives, vain, may, ex...</td>
      <td>1791</td>
      <td>17911025</td>
      <td>119.0</td>
      <td>52.0</td>
      <td>0.695906</td>
    </tr>
    <tr>
      <th>17921106.html</th>
      <td>[senate, house, representatives, abatement, sa...</td>
      <td>1792</td>
      <td>17921106</td>
      <td>83.0</td>
      <td>57.0</td>
      <td>0.592857</td>
    </tr>
    <tr>
      <th>17931203.html</th>
      <td>[senate, house, representatives, since, commen...</td>
      <td>1793</td>
      <td>17931203</td>
      <td>84.0</td>
      <td>58.0</td>
      <td>0.591549</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>20130212.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2013</td>
      <td>20130212</td>
      <td>301.0</td>
      <td>117.0</td>
      <td>0.720096</td>
    </tr>
    <tr>
      <th>20140128.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2014</td>
      <td>20140128</td>
      <td>294.0</td>
      <td>133.0</td>
      <td>0.688525</td>
    </tr>
    <tr>
      <th>20150120.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2015</td>
      <td>20150120</td>
      <td>293.0</td>
      <td>162.0</td>
      <td>0.643956</td>
    </tr>
    <tr>
      <th>20160112.html</th>
      <td>[speaker, vice, president, members, congress, ...</td>
      <td>2016</td>
      <td>20160112</td>
      <td>250.0</td>
      <td>136.0</td>
      <td>0.647668</td>
    </tr>
    <tr>
      <th>20170228.html</th>
      <td>[thank, much, speaker, vice, president, member...</td>
      <td>2017</td>
      <td>20170228</td>
      <td>243.0</td>
      <td>132.0</td>
      <td>0.648000</td>
    </tr>
  </tbody>
</table>
<p>231 rows × 6 columns</p>
</div></div></div>
</div>
<p>Let’s plot a histogram of the scores’ distribution with df.hist(column=’pos_score’). The sentiments are fairly postive,
(what does this mean?)</p>
<p>Why do you think a list of dictionary words might be dependent on language usage? Does the list of positive and negative words therefore change over time? What does this mean for our historical comparison?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;pos_score&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[&lt;AxesSubplot:title={&#39;center&#39;:&#39;pos_score&#39;}&gt;]], dtype=object)
</pre></div>
</div>
<img alt="../../_images/Text_2_40_1.png" src="../../_images/Text_2_40_1.png" />
</div>
</div>
<p>Finally, let’s quickly plot the sentiments over time with df.plot(x=’year’,y=’pos_score’, kind=’scatter’)</p>
<p>We again see that negative sentiments dominate the speeches.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;pos_score&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;year&#39;, ylabel=&#39;pos_score&#39;&gt;
</pre></div>
</div>
<img alt="../../_images/Text_2_42_1.png" src="../../_images/Text_2_42_1.png" />
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./SocialAnalytics/Text"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="Text_1.html" title="previous page">Analysing Historical Cultures 1</a>
    <a class='right-next' id="next-link" href="../VisualsArts/Visuals_and_Arts_1.html" title="next page">Visuals and Arts 1</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By DIMPAH<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>